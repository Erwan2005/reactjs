{"ast":null,"code":"var _jsxFileName = \"/home/erwan/Documents/Frontend/reactjs/src/components/Messenger.js\";\nimport React from 'react';\nimport { withRouter } from \"react-router\";\nimport { withStyles, InputBase, Avatar, Typography, Badge } from '@material-ui/core';\nimport { Search, Image, EmojiEmotions, AttachFile, ThumbUp, Telegram, Videocam, ArrowDownward } from '@material-ui/icons';\nimport ScrollToBottom from 'react-scroll-to-bottom';\nimport Picker, { SKIN_TONE_MEDIUM_DARK } from \"emoji-picker-react\";\nimport axios from 'axios';\nimport { format } from 'timeago.js'; //import PdfThumbnail from 'react-pdf-thumbnail'; \n\nimport apiService from '../APIService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst useStyles = theme => ({\n  container: {\n    color: \"#848484\",\n    position: \"fixed\",\n    display: 'flex',\n    margin: theme.spacing(2)\n  },\n  left: {\n    width: '20vw',\n    height: '100vh',\n    borderRight: '1px solid #3a3a3a',\n    paddingRight: theme.spacing(1),\n    paddingBottom: theme.spacing(1)\n  },\n  middle: {\n    width: '56vw',\n    height: '100vh',\n    paddingLeft: theme.spacing(1),\n    paddingRight: theme.spacing(1),\n    paddingBottom: theme.spacing(3),\n    position: 'relative',\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'space-between'\n  },\n  right: {\n    width: '20vw',\n    borderLeft: '1px solid #3a3a3a',\n    paddingLeft: theme.spacing(1),\n    paddingBottom: theme.spacing(1)\n  },\n  search: {\n    width: '95%',\n    minHeight: '3.5%',\n    backgroundColor: '#3a3a3a',\n    padding: theme.spacing(0.5),\n    marginTop: theme.spacing(0.5),\n    alignItems: 'center',\n    display: 'flex',\n    borderRadius: theme.spacing(3)\n  },\n  list: {\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(1),\n    width: '95%',\n    maxHeight: '90%',\n    overflowY: 'auto'\n  },\n  item: {\n    display: 'flex',\n    padding: theme.spacing(1),\n    alignItems: 'center',\n    cursor: 'pointer',\n    \"&:hover\": {\n      background: '#3a3a3a',\n      borderRadius: theme.spacing(1)\n    }\n  },\n  name: {\n    marginLeft: theme.spacing(1),\n    spacing: 0\n  },\n  messenger: {\n    justifyContent: 'center',\n    height: 'calc(100% - 150px)',\n    maxHeight: 'calc(100% - 150px)',\n    overflowY: 'hide'\n  },\n  bottom: {\n    backgroundColor: '#3a3a3a',\n    alignItems: 'center',\n    display: 'flex',\n    borderRadius: theme.spacing(3),\n    marginBottom: theme.spacing(2)\n  },\n  messageInput: {\n    width: '84%',\n    maxWidth: '84%',\n    height: '40px',\n    maxHeight: '40px',\n    border: '1px solid #555',\n    fontSize: '14px',\n    fontWeight: 'bold',\n    color: \"#848484\",\n    paddingLeft: theme.spacing(1),\n    paddingRight: theme.spacing(1),\n    backgroundColor: '#3a3a3a',\n    \"&:focus\": {\n      outline: 'none'\n    }\n  },\n  message: {\n    display: 'flex',\n    padding: '10px',\n    textTransform: 'capitalize'\n  },\n  messageText: {\n    padding: '10px',\n    borderTopRightRadius: '20px',\n    borderBottomRightRadius: '20px',\n    borderBottomLeftRadius: '20px',\n    backgroundColor: '#666666',\n    color: 'black',\n    maxWidth: '300px'\n  },\n  messageOwn: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'flex-end',\n    padding: '10px',\n    textTransform: 'capitalize'\n  },\n  messageOwnTex: {\n    padding: '10px',\n    borderTopLeftRadius: '20px',\n    borderBottomLeftRadius: '20px',\n    borderBottomRightRadius: '20px',\n    backgroundColor: '#2a6db1',\n    color: 'white',\n    maxWidth: '300px'\n  },\n  emoji: {\n    position: 'absolute',\n    width: '36%',\n    height: '41%',\n    backgroundColor: '#3a3a3a',\n    bottom: '85px',\n    borderRadius: theme.spacing(2)\n  },\n  badge: {\n    backgroundColor: '#44b700',\n    color: '#44b700',\n    border: '2.5px solid #323232',\n    width: '15px',\n    height: '15px',\n    borderRadius: '50%'\n  },\n  image: {\n    maxWidth: '280px',\n    borderRadius: '4px'\n  },\n  image2: {\n    maxWidth: '50px',\n    borderRadius: '4px',\n    marginRight: '2px'\n  },\n  link: {\n    display: \"flex\",\n    textDecoration: \"none\",\n    color: \"#808080\",\n    alignItems: \"center\"\n  }\n});\n\nexport class Messenger extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onEmojiClick = (event, emojiObject) => {\n      this.setState({\n        chosenEmoji: emojiObject\n      });\n      this.setState({\n        message: this.state.message + emojiObject.emoji\n      });\n    };\n\n    this.imageHandler = async e => {\n      const reader = new FileReader();\n\n      reader.onload = () => {\n        if (reader.readyState === 2) {\n          this.setState({\n            image: reader.result\n          });\n        }\n      };\n\n      reader.readAsDataURL(e.target.files[0]);\n      const file = e.target.files[0];\n\n      if (file.size > 3e6) {\n        window.alert(\"Please upload a file smaller than 3 MB\");\n        return false;\n      } else {\n        const base64 = await this.convertBase64(file);\n        this.setState({\n          image: base64\n        });\n      }\n    };\n\n    this.docHandler = async e => {\n      const reader = new FileReader();\n\n      reader.onload = () => {\n        if (reader.readyState === 2) {\n          //this.setState({image:reader.result})\n          console.log('file readed');\n        }\n      };\n\n      reader.readAsDataURL(e.target.files[0]);\n      const file = e.target.files[0];\n\n      if (file.size > 10e6) {\n        window.alert(\"Please upload a file smaller than 10 MB\");\n        return false;\n      } else {\n        const base64 = await this.convertBase64(file);\n        this.setState({\n          doc_file: base64\n        });\n      }\n    };\n\n    this.convertBase64 = file => {\n      return new Promise((resolve, reject) => {\n        const fileReader = new FileReader();\n        fileReader.readAsDataURL(file);\n\n        fileReader.onload = () => {\n          resolve(fileReader.result);\n        };\n\n        fileReader.onerror = error => {\n          reject(error);\n        };\n      });\n    };\n\n    this.getUser = async () => {\n      let data = await axios({\n        method: 'get',\n        url: apiService.url + 'users/'\n      }).then(({\n        data\n      }) => data);\n      this.setState({\n        profile: data\n      });\n    };\n\n    this.getFriend = async () => {\n      let data = await axios({\n        method: 'get',\n        url: apiService.url + 'friend/'\n      }).then(({\n        data\n      }) => data);\n      this.setState({\n        friends: data\n      });\n    };\n\n    this.getMessage = async (id, username, avatar) => {\n      this.setState({\n        private_message: []\n      });\n      this.setState({\n        conversation: true\n      });\n      let data = await axios({\n        method: 'get',\n        url: apiService.url + 'message/'\n      }).then(({\n        data\n      }) => data);\n      this.setState({\n        messages: data.results\n      });\n      await this.setState({\n        user: [id, username, avatar]\n      });\n      this.setState({\n        receiver: id\n      }); //await this.state.messages.filter(item=> (item.sender === parseInt(id, 10) && item.receiver=== parseInt(this.id, 10)) || (item.receiver === parseInt(id, 10) && item.sender=== parseInt(this.id, 10))).map(checked=>(this.setState({private_message:checked})))\n\n      (await this.state.messages) && this.state.messages.map(item => {\n        if (item.sender === parseInt(id, 10) && item.receiver === parseInt(this.id, 10) || item.receiver === parseInt(id, 10) && item.sender === parseInt(this.id, 10)) {\n          this.setState({\n            private_message: this.state.private_message.concat(item)\n          });\n        }\n      });\n    };\n\n    this.getLastmessage = async id => {\n      return await this.state.messages.filter(item => item.sender === parseInt(id, 10) && item.receiver === parseInt(this.id, 10) || item.receiver === parseInt(id, 10) && item.sender === parseInt(this.id, 10))[this.state.messages.filter(item => item.sender === parseInt(id, 10) && item.receiver === parseInt(this.id, 10) || item.receiver === parseInt(id, 10) && item.sender === parseInt(this.id, 10)).length - 1];\n    };\n\n    this.sendMessage = async (own, receiver, content) => {\n      if (this.state.image !== '' || this.state.doc_file !== '') {\n        if (this.state.image !== '') {\n          let data = await axios.post(apiService.url + 'message/', {\n            sender: own,\n            receiver: receiver,\n            content: content,\n            img: this.state.image\n          }).then(({\n            data\n          }) => data);\n          this.setState({\n            messages: this.state.messages.concat(data)\n          });\n          this.setState({\n            message: ''\n          });\n          this.setState({\n            image: ''\n          });\n        } else if (this.state.doc_file !== '') {\n          let data = await axios.post(apiService.url + 'message/', {\n            sender: own,\n            receiver: receiver,\n            content: content,\n            files: this.state.doc_file\n          }).then(({\n            data\n          }) => data);\n          this.setState({\n            messages: this.state.messages.concat(data)\n          });\n          this.setState({\n            message: ''\n          });\n          this.setState({\n            doc_file: ''\n          });\n        }\n      } else {\n        let data = await axios.post(apiService.url + 'message/', {\n          sender: own,\n          receiver: receiver,\n          content: content\n        }).then(({\n          data\n        }) => data);\n        this.setState({\n          messages: this.state.messages.concat(data)\n        });\n        this.setState({\n          message: ''\n        });\n        this.setState({\n          image: ''\n        });\n      }\n\n      ;\n    };\n\n    this.id = this.props.match.params.id;\n    this.refImg = /*#__PURE__*/React.createRef();\n    this.refFl = /*#__PURE__*/React.createRef();\n    this.state = {\n      message: '',\n      messages: [],\n      chosenEmoji: null,\n      open: false,\n      friends: [],\n      profile: [],\n      user: [],\n      private_message: [],\n      receiver: '',\n      conversation: false,\n      last_message: [],\n      doc_file: '',\n      image: ''\n    };\n  }\n\n  componentDidMount() {\n    this.getUser();\n    this.getFriend();\n  }\n\n  render() {\n    const {\n      classes\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.container,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.left,\n        children: [\"My conversation\", /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.search,\n          children: [/*#__PURE__*/_jsxDEV(Search, {\n            style: {\n              marginRight: '4px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(InputBase, {\n            placeholder: \"Search... \",\n            fullWidth: true,\n            style: {\n              color: '#848484',\n              fontSize: '16px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.list,\n          children: this.state.friends && this.state.friends.map(friend => {\n            if (friend.user === parseInt(this.id, 10)) {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                children: this.state.profile.filter(item => item.id === parseInt(friend.friend, 10)).map(checked => {\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: classes.item,\n                    onClick: () => this.getMessage(checked.id, checked.username, checked.avatar),\n                    children: [/*#__PURE__*/_jsxDEV(Avatar, {\n                      src: checked.avatar\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 341,\n                      columnNumber: 14\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: classes.name,\n                      children: [/*#__PURE__*/_jsxDEV(Typography, {\n                        style: {\n                          textTransform: 'capitalize'\n                        },\n                        children: checked.username\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 343,\n                        columnNumber: 15\n                      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                        style: {\n                          fontSize: '10px'\n                        },\n                        children: \"last message\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 344,\n                        columnNumber: 15\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 342,\n                      columnNumber: 14\n                    }, this)]\n                  }, checked.id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 340,\n                    columnNumber: 13\n                  }, this);\n                })\n              }, friend.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 337,\n                columnNumber: 10\n              }, this);\n            } else return null;\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.middle,\n        children: this.state.conversation ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              height: '5.5%',\n              padding: '5px',\n              backgroundColor: '#3a3a3a',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n              display: 'flex'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Avatar, {\n                src: this.state.user[2]\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 360,\n                columnNumber: 8\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: classes.name,\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  style: {\n                    textTransform: 'capitalize'\n                  },\n                  children: this.state.user[1]\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 362,\n                  columnNumber: 9\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  style: {\n                    fontSize: '10px'\n                  },\n                  children: \"Online\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 363,\n                  columnNumber: 9\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 361,\n                columnNumber: 8\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(Videocam, {\n              style: {\n                cursor: 'pointer'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 7\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(ScrollToBottom, {\n            className: classes.messenger,\n            children: this.state.private_message && this.state.private_message.map(privateMessage => {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: privateMessage.sender === parseInt(this.id, 10) ? classes.messageOwn : classes.message,\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      display: 'flex'\n                    },\n                    children: [privateMessage.sender === parseInt(this.id, 10) ? null : /*#__PURE__*/_jsxDEV(Avatar, {\n                      src: this.state.user[2],\n                      style: {\n                        marginRight: '10px'\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 374,\n                      columnNumber: 72\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: privateMessage.sender === parseInt(this.id, 10) ? classes.messageOwnTex : classes.messageText,\n                      children: [/*#__PURE__*/_jsxDEV(Typography, {\n                        children: [\" \", privateMessage.content, \" \"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 376,\n                        columnNumber: 13\n                      }, this), privateMessage.img ? /*#__PURE__*/_jsxDEV(\"img\", {\n                        src: privateMessage.img,\n                        className: classes.image,\n                        alt: \"\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 377,\n                        columnNumber: 35\n                      }, this) : null, privateMessage.files ? /*#__PURE__*/_jsxDEV(\"a\", {\n                        href: privateMessage.files,\n                        className: classes.link,\n                        download: true,\n                        children: [/*#__PURE__*/_jsxDEV(ArrowDownward, {\n                          style: {\n                            cursor: 'pointer',\n                            marginRight: '3px'\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 378,\n                          columnNumber: 102\n                        }, this), \" Files\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 378,\n                        columnNumber: 37\n                      }, this) : null]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 375,\n                      columnNumber: 12\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 373,\n                    columnNumber: 11\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 372,\n                  columnNumber: 10\n                }, this)\n              }, privateMessage.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 371,\n                columnNumber: 9\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.bottom,\n            children: [/*#__PURE__*/_jsxDEV(AttachFile, {\n              style: {\n                cursor: 'pointer',\n                marginRight: '3px'\n              },\n              onClick: event => {\n                event.preventDefault();\n                this.refFl.current.click();\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(Image, {\n              style: {\n                cursor: 'pointer',\n                marginRight: '3px'\n              },\n              onClick: event => {\n                event.preventDefault();\n                this.refImg.current.click();\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              onChange: e => {\n                this.imageHandler(e);\n              },\n              ref: this.refImg,\n              style: {\n                display: 'none'\n              },\n              accept: \".png, .jpg, .jpeg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 395,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              onChange: e => {\n                this.docHandler(e);\n              },\n              ref: this.refFl,\n              style: {\n                display: 'none'\n              },\n              accept: \".pdf\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 399,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(EmojiEmotions, {\n              style: {\n                cursor: 'pointer',\n                marginRight: '4px'\n              },\n              onClick: () => this.setState({\n                open: !this.state.open\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              src: this.state.image,\n              className: classes.image2,\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              className: classes.messageInput,\n              placeholder: \"write something...\",\n              value: this.state.message,\n              onChange: e => this.setState({\n                message: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 405,\n              columnNumber: 7\n            }, this), this.state.message === '' ? /*#__PURE__*/_jsxDEV(ThumbUp, {\n              style: {\n                cursor: 'pointer',\n                marginRight: '3px',\n                marginLeft: '5px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 411,\n              columnNumber: 48\n            }, this) : /*#__PURE__*/_jsxDEV(Telegram, {\n              style: {\n                cursor: 'pointer',\n                marginRight: '3px',\n                marginLeft: '5px'\n              },\n              onClick: () => this.sendMessage(this.id, parseInt(this.state.receiver, 10), this.state.message)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 6\n          }, this), this.state.open && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.emoji,\n            children: /*#__PURE__*/_jsxDEV(Picker, {\n              style: {\n                backgroundColor: '#3a3a3a'\n              },\n              onEmojiClick: this.onEmojiClick,\n              disableAutoFocus: true,\n              skinTone: SKIN_TONE_MEDIUM_DARK,\n              groupNames: {\n                smileys_people: \"PEOPLE\"\n              },\n              native: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 416,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(Typography, {\n          style: {\n            fontSize: '35px'\n          },\n          children: \"No conversation selected\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.right,\n        children: [\"Online Friends\", /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.search,\n          children: [/*#__PURE__*/_jsxDEV(Search, {\n            style: {\n              marginRight: '4px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(InputBase, {\n            placeholder: \"Search... \",\n            fullWidth: true,\n            style: {\n              color: '#848484',\n              fontSize: '16px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 433,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.list,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.item,\n            children: [/*#__PURE__*/_jsxDEV(Badge, {\n              overlap: \"circular\",\n              badgeContent: \"\",\n              variant: \"dot\",\n              classes: {\n                badge: classes.badge\n              },\n              anchorOrigin: {\n                vertical: 'bottom',\n                horizontal: 'right'\n              },\n              children: /*#__PURE__*/_jsxDEV(Avatar, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 442,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 441,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: classes.name,\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                children: \"Manohisoa\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 445,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                style: {\n                  fontSize: '10px'\n                },\n                children: \"Online\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 446,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 444,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 440,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 4\n    }, this);\n  }\n\n}\nexport default withRouter(withStyles(useStyles)(Messenger));","map":{"version":3,"sources":["/home/erwan/Documents/Frontend/reactjs/src/components/Messenger.js"],"names":["React","withRouter","withStyles","InputBase","Avatar","Typography","Badge","Search","Image","EmojiEmotions","AttachFile","ThumbUp","Telegram","Videocam","ArrowDownward","ScrollToBottom","Picker","SKIN_TONE_MEDIUM_DARK","axios","format","apiService","useStyles","theme","container","color","position","display","margin","spacing","left","width","height","borderRight","paddingRight","paddingBottom","middle","paddingLeft","flexDirection","justifyContent","right","borderLeft","search","minHeight","backgroundColor","padding","marginTop","alignItems","borderRadius","list","marginBottom","maxHeight","overflowY","item","cursor","background","name","marginLeft","messenger","bottom","messageInput","maxWidth","border","fontSize","fontWeight","outline","message","textTransform","messageText","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius","messageOwn","messageOwnTex","borderTopLeftRadius","emoji","badge","image","image2","marginRight","link","textDecoration","Messenger","Component","constructor","props","onEmojiClick","event","emojiObject","setState","chosenEmoji","state","imageHandler","e","reader","FileReader","onload","readyState","result","readAsDataURL","target","files","file","size","window","alert","base64","convertBase64","docHandler","console","log","doc_file","Promise","resolve","reject","fileReader","onerror","error","getUser","data","method","url","then","profile","getFriend","friends","getMessage","id","username","avatar","private_message","conversation","messages","results","user","receiver","map","sender","parseInt","concat","getLastmessage","filter","length","sendMessage","own","content","post","img","match","params","refImg","createRef","refFl","open","last_message","componentDidMount","render","classes","friend","checked","privateMessage","preventDefault","current","click","value","smileys_people","vertical","horizontal"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { withRouter } from \"react-router\";\nimport { withStyles,InputBase,Avatar,Typography,Badge } from '@material-ui/core';\nimport { Search,Image,EmojiEmotions,AttachFile,ThumbUp,Telegram,Videocam,ArrowDownward } from '@material-ui/icons';\nimport ScrollToBottom from 'react-scroll-to-bottom';\nimport Picker, { SKIN_TONE_MEDIUM_DARK } from \"emoji-picker-react\";\nimport axios from 'axios';\nimport {format} from 'timeago.js';\n//import PdfThumbnail from 'react-pdf-thumbnail'; \nimport apiService from '../APIService';\n\nconst useStyles = theme => ({\n  container: {\n    color: \"#848484\",\n    position :\"fixed\",\n    display: 'flex',\n    margin: theme.spacing(2),\n  },\n  left:{\n  \twidth: '20vw',\n  \theight: '100vh',\n  \tborderRight: '1px solid #3a3a3a',\n  \tpaddingRight: theme.spacing(1),\n  \tpaddingBottom: theme.spacing(1),\n  },\n  middle:{\n  \twidth: '56vw',\n  \theight: '100vh',\n  \tpaddingLeft: theme.spacing(1),\n  \tpaddingRight: theme.spacing(1),\n  \tpaddingBottom: theme.spacing(3),\n  \tposition: 'relative',\n  \tdisplay: 'flex',\n  \tflexDirection: 'column',\n  \tjustifyContent: 'space-between',\n  },\n  right:{\n  \twidth: '20vw',\n  \tborderLeft: '1px solid #3a3a3a',\n  \tpaddingLeft: theme.spacing(1),\n  \tpaddingBottom: theme.spacing(1),\n  },\n  search:{\n  \twidth: '95%',\n  \tminHeight: '3.5%',\n  \tbackgroundColor: '#3a3a3a',\n  \tpadding: theme.spacing(0.5),\n  \tmarginTop: theme.spacing(0.5),\n  \talignItems: 'center',\n  \tdisplay: 'flex',\n  \tborderRadius: theme.spacing(3),\n  },\n  list:{\n  \tmarginTop: theme.spacing(1),\n  \tmarginBottom: theme.spacing(1),\n  \twidth: '95%',\n  \tmaxHeight: '90%',\n  \toverflowY: 'auto',\n\n  },\n  item:{\n  \tdisplay: 'flex',\n  \tpadding: theme.spacing(1),\n  \talignItems: 'center',\n  \tcursor: 'pointer',\n  \t\"&:hover\": {\n        background: '#3a3a3a',\n        borderRadius: theme.spacing(1),\n    },\n  },\n  name:{\n  \tmarginLeft: theme.spacing(1),\n  \tspacing: 0,\n  },\n  messenger:{\n  \tjustifyContent: 'center',\n  \theight: 'calc(100% - 150px)',\n  \tmaxHeight: 'calc(100% - 150px)',\n  \toverflowY: 'hide',\n  },\n  bottom:{\n  \tbackgroundColor: '#3a3a3a',\n  \talignItems: 'center',\n  \tdisplay: 'flex',\n  \tborderRadius: theme.spacing(3),\n  \tmarginBottom: theme.spacing(2)\n  },\n  messageInput:{\n  \twidth: '84%',\n  \tmaxWidth:'84%',\n  \theight: '40px',\n  \tmaxHeight:'40px',\n    border: '1px solid #555',\n    fontSize: '14px',\n    fontWeight: 'bold',\n    color: \"#848484\",\n    paddingLeft: theme.spacing(1),\n    paddingRight: theme.spacing(1),\n    backgroundColor: '#3a3a3a',\n    \"&:focus\": {\n        outline: 'none',\n    },\n  },\n\n \tmessage:{\n\t\tdisplay: 'flex',\n\t\tpadding: '10px',\n\t\ttextTransform: 'capitalize',\n\t},\n\tmessageText:{\n\t    padding: '10px',\n\t    borderTopRightRadius: '20px',\n\t    borderBottomRightRadius: '20px',\n\t    borderBottomLeftRadius: '20px',\n\t    backgroundColor: '#666666',\n\t    color: 'black',\n\t    maxWidth: '300px',\n\t},\n\tmessageOwn:{\n\t\tdisplay: 'flex',\n\t\tflexDirection: 'column',\n\t\talignItems: 'flex-end',\n\t\tpadding: '10px',\n\t\ttextTransform: 'capitalize',\n\t},\n\n\tmessageOwnTex:{\n\t\t\tpadding: '10px',\n\t    borderTopLeftRadius: '20px',\n\t    borderBottomLeftRadius: '20px',\n\t    borderBottomRightRadius: '20px',\n\t    backgroundColor: '#2a6db1',\n\t    color: 'white',\n\t    maxWidth: '300px',\n\t},\n\temoji:{\n\t\tposition: 'absolute',\n\t\twidth: '36%',\n\t\theight: '41%',\n\t\tbackgroundColor: '#3a3a3a',\n\t\tbottom: '85px',\n\t\tborderRadius: theme.spacing(2),\n\t},\n\tbadge:{\n\t\tbackgroundColor: '#44b700',\n    color: '#44b700',\n    border: '2.5px solid #323232',\n    width: '15px',\n    height: '15px',\n    borderRadius: '50%',\n\t},\n\timage:{\n\t\tmaxWidth: '280px',\n\t\tborderRadius: '4px',\n\t},\n\timage2:{\n\t\tmaxWidth: '50px',\n\t\tborderRadius: '4px',\n\t\tmarginRight: '2px',\n\t},\n\n\tlink:{\n    display: \"flex\",\n    textDecoration: \"none\",\n    color: \"#808080\",\n    alignItems: \"center\",\n  },\n\n})\n\nexport class Messenger extends React.Component {\n\tconstructor(props){\n\t    super(props);\n\t    this.id = this.props.match.params.id;\n\t    this.refImg = React.createRef();\n\t    this.refFl = React.createRef();\n\t    this.state={\n\t    \tmessage:'',\n\t    \tmessages: [],\n\t    \tchosenEmoji: null,\n\t    \topen: false,\n\t    \tfriends: [],\n\t    \tprofile: [],\n\t    \tuser: [],\n\t    \tprivate_message: [],\n\t    \treceiver: '',\n\t    \tconversation: false,\n\t    \tlast_message: [],\n\t    \tdoc_file: '',\n\t    \timage: '',\n\t    };\n\t};\n\n\n\tonEmojiClick = (event, emojiObject) => {\n\t    this.setState({chosenEmoji: emojiObject})\n\t    this.setState({message: this.state.message+emojiObject.emoji})\n\t};\n\n\timageHandler = async (e) => {\n\n      const reader = new FileReader();\n      reader.onload = () =>{\n        if(reader.readyState === 2){\n          this.setState({image:reader.result})\n        }\n      }\n      reader.readAsDataURL(e.target.files[0])\n      const file = e.target.files[0];\n      if (file.size > 3e6) {\n\t\t      window.alert(\"Please upload a file smaller than 3 MB\");\n\t\t      return false;\n\t\t    }else{\n\t\t      const base64 = await this.convertBase64(file);\n\t\t      this.setState({image:base64})}\n    };\n\n    docHandler = async (e) => {\n\n      const reader = new FileReader();\n      reader.onload = () =>{\n        if(reader.readyState === 2){\n          //this.setState({image:reader.result})\n          console.log('file readed')\n        }\n      }\n      reader.readAsDataURL(e.target.files[0])\n      const file = e.target.files[0];\n      if (file.size > 10e6) {\n\t\t      window.alert(\"Please upload a file smaller than 10 MB\");\n\t\t      return false;\n\t\t    }else {\n\t\t      const base64 = await this.convertBase64(file);\n\t\t      this.setState({doc_file:base64})}\n    };\n\n  \tconvertBase64 = (file) => {\n      return new Promise((resolve, reject) => {\n        const fileReader = new FileReader();\n        fileReader.readAsDataURL(file);\n\n        fileReader.onload = () => {\n          resolve(fileReader.result);\n        };\n\n        fileReader.onerror = (error) => {\n          reject(error);\n        };\n      });\n    };\n\n  getUser = async() =>{\n    let data = await axios({\n        method: 'get',\n        url: apiService.url+'users/',\n    }).then(({data}) => data)\n    this.setState({profile: data})\n  };\n\n  getFriend = async() =>{\n    let data = await axios({\n        method: 'get',\n        url: apiService.url+'friend/',\n    }).then(({data}) => data)\n    this.setState({friends: data})\n  };\n\n  getMessage = async(id,username,avatar) =>{\n  \tthis.setState({private_message:[]})\n  \tthis.setState({conversation: true})\n  \tlet data = await axios({\n        method: 'get',\n        url: apiService.url+'message/',\n    }).then(({data}) => data)\n    this.setState({messages: data.results})\n    await this.setState({user: [id,username,avatar]})\n    this.setState({receiver: id})\n    //await this.state.messages.filter(item=> (item.sender === parseInt(id, 10) && item.receiver=== parseInt(this.id, 10)) || (item.receiver === parseInt(id, 10) && item.sender=== parseInt(this.id, 10))).map(checked=>(this.setState({private_message:checked})))\n    await this.state.messages && this.state.messages.map((item) =>{\n    \tif ((item.sender === parseInt(id, 10) && item.receiver=== parseInt(this.id, 10)) || (item.receiver === parseInt(id, 10) && item.sender=== parseInt(this.id, 10))){\n    \t\tthis.setState({private_message:this.state.private_message.concat(item)})\n    \t}\n    })\n  };\n\n  getLastmessage = async(id) =>{\n  \treturn await this.state.messages.filter(item=> (item.sender === parseInt(id, 10) && item.receiver=== parseInt(this.id, 10)) || (item.receiver === parseInt(id, 10) && item.sender=== parseInt(this.id, 10)))[this.state.messages.filter(item=> (item.sender === parseInt(id, 10) && item.receiver=== parseInt(this.id, 10)) || (item.receiver === parseInt(id, 10) && item.sender=== parseInt(this.id, 10))).length-1]\n  };\n\n  sendMessage = async(own,receiver,content)=>{\n\t\tif(this.state.image !== '' || this.state.doc_file !== ''){\n\t\t\tif (this.state.image !== ''){\n\t\t\t\tlet data = await axios.post(apiService.url+'message/',{sender:own,receiver:receiver,content:content,img:this.state.image})\n\t\t\t\t.then(({data}) => data)\n\t\t\t\tthis.setState({messages: this.state.messages.concat(data)})\n\t\t\t\tthis.setState({message: ''})\n\t\t\t\tthis.setState({image: ''})}\n\t\t\telse if (this.state.doc_file !== ''){\n\t\t\t\tlet data = await axios.post(apiService.url+'message/',{sender:own,receiver:receiver,content:content,files:this.state.doc_file})\n\t\t\t\t.then(({data}) => data)\n\t\t\t\tthis.setState({messages: this.state.messages.concat(data)})\n\t\t\t\tthis.setState({message: ''})\n\t\t\t\tthis.setState({doc_file: ''})}\n\t\t}else{\n\t\t\tlet data = await axios.post(apiService.url+'message/',{sender:own,receiver:receiver,content:content})\n\t\t\t.then(({data}) => data)\n\t\t\tthis.setState({messages: this.state.messages.concat(data)})\n\t\t\tthis.setState({message: ''})\n\t\t\tthis.setState({image: ''})\n\t  };\n\n\t\t};\n\t\t\n  componentDidMount(){\n    this.getUser()\n    this.getFriend()\n  };\n\n\trender() {\n\t\tconst { classes } = this.props;\n\t\treturn (\n\t\t\t<div className={classes.container}>\n\t\t\t\t<div className={classes.left}>\n\t\t\t\t\tMy conversation\n\t\t\t\t\t<div className={classes.search}>\n\t\t\t\t\t\t<Search style={{marginRight: '4px'}}/>\n\t\t\t\t\t\t<InputBase\n\t\t\t                placeholder=\"Search... \"\n\t\t\t                fullWidth\n\t\t\t                style={{color: '#848484', fontSize: '16px'}}\n\t\t\t            />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={classes.list}>\n\t\t\t\t\t\t{this.state.friends && this.state.friends.map(friend => {\n\t\t\t\t\t\t\tif (friend.user === parseInt(this.id, 10)){\n\t\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t\t<div key={friend.id}>\n\t\t\t\t\t\t\t\t\t\t{this.state.profile.filter(item=> item.id === parseInt(friend.friend,10)).map(checked=>{\n\t\t\t\t\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t\t\t\t\t<div className={classes.item} key={checked.id} onClick={() => this.getMessage(checked.id,checked.username,checked.avatar)}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Avatar src={checked.avatar}/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className={classes.name}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Typography style={{textTransform:'capitalize'}}>{checked.username}</Typography>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Typography style={{fontSize: '10px'}}>last message</Typography>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}else return null\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className={classes.middle}>\n\t\t\t\t\t{this.state.conversation ? (<>\n\t\t\t\t\t<div style={{height: '5.5%',padding: '5px',backgroundColor: '#3a3a3a',justifyContent: 'space-between',alignItems:'center',display: 'flex'}}>\n\t\t\t\t\t\t<div style={{display: 'flex'}}>\n\t\t\t\t\t\t\t<Avatar src={this.state.user[2]}/>\n\t\t\t\t\t\t\t<div className={classes.name}>\n\t\t\t\t\t\t\t\t<Typography style={{textTransform:'capitalize'}}>{this.state.user[1]}</Typography>\n\t\t\t\t\t\t\t\t<Typography style={{fontSize: '10px'}}>Online</Typography>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Videocam style={{cursor: 'pointer'}}/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<ScrollToBottom className={classes.messenger}>\n\t\t\t\t\t\t{this.state.private_message && this.state.private_message.map(privateMessage=>{\n\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t<div key={privateMessage.id}>\n\t\t\t\t\t\t\t\t\t<div className={(privateMessage.sender === parseInt(this.id, 10)) ? classes.messageOwn : classes.message}>\n\t\t\t\t\t\t\t\t\t\t<div style={{display: 'flex'}}>\n\t\t\t\t\t\t\t\t\t\t\t{(privateMessage.sender === parseInt(this.id, 10)) ? null : <Avatar src={this.state.user[2]} style={{marginRight: '10px'}} />}\n\t\t\t\t\t\t\t\t\t\t\t<div className={(privateMessage.sender === parseInt(this.id, 10)) ? classes.messageOwnTex : classes.messageText}>\n\t\t\t\t\t\t\t\t\t\t\t\t<Typography > {privateMessage.content} </Typography>\n\t\t\t\t\t\t\t\t\t\t\t\t{privateMessage.img ? <img src={privateMessage.img} className={classes.image} alt='' /> : null}\n\t\t\t\t\t\t\t\t\t\t\t\t{privateMessage.files ? <a href={privateMessage.files} className={classes.link} download><ArrowDownward style={{cursor: 'pointer',marginRight: '3px'}} /> Files</a> : null}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t})}\n\t\t\t\t\t</ScrollToBottom>\n\t\t\t\t\t<div className={classes.bottom}>\n\t\t\t\t\t\t<AttachFile style={{cursor: 'pointer',marginRight: '3px'}} onClick={(event) => {\n\t\t\t                event.preventDefault();\n\t\t\t                this.refFl.current.click();}}/>\n\t\t\t\t\t\t<Image style={{cursor: 'pointer',marginRight: '3px'}} onClick={(event) => {\n\t\t\t                event.preventDefault();\n\t\t\t                this.refImg.current.click();\n\t\t\t                }}/>\n\n\t\t\t\t\t\t<input type='file' onChange={(e) => {\n\t\t\t\t                this.imageHandler(e);\n\t\t\t\t              }} ref={this.refImg} style={{display: 'none'}} accept=\".png, .jpg, .jpeg\"/>\n\n\t\t\t\t    <input type='file'  onChange={(e) => {\n\t\t\t\t                this.docHandler(e);\n\t\t\t\t              }} ref={this.refFl} style={{display: 'none'}} accept=\".pdf\"/>\n\n\t\t\t\t\t\t<EmojiEmotions style={{cursor: 'pointer',marginRight: '4px'}} onClick={() =>this.setState({open:!this.state.open})}/>\n\t\t\t\t\t\t<img src={this.state.image} className={classes.image2} alt='' />\n\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\tclassName={classes.messageInput}\n\t\t                    placeholder=\"write something...\"\n\t\t                    value = {this.state.message}\n              \t\t\t\tonChange = {e => this.setState({message:e.target.value})}\n\t\t                ></textarea>\n\t\t                {this.state.message ==='' ? (<ThumbUp style={{cursor: 'pointer',marginRight: '3px',marginLeft: '5px'}}/>) : (\n\t\t                <Telegram style={{cursor: 'pointer',marginRight: '3px',marginLeft: '5px'}} onClick={() => this.sendMessage(this.id,parseInt(this.state.receiver,10),this.state.message)}/>)}\n\t\t\t\t\t</div>\n\t\t\t\t\t{this.state.open && (\n\t\t\t\t\t\t<div className={classes.emoji}>\n\t\t\t\t\t\t\t<Picker\n\t\t\t\t\t\t\t\tstyle={{backgroundColor: '#3a3a3a'}}\n\t\t\t\t\t\t        onEmojiClick={this.onEmojiClick}\n\t\t\t\t\t\t        disableAutoFocus={true}\n\t\t\t\t\t\t        skinTone={SKIN_TONE_MEDIUM_DARK}\n\t\t\t\t\t\t        groupNames={{ smileys_people: \"PEOPLE\" }}\n\t\t\t\t\t\t        native\n\t\t\t\t\t\t    />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t</>) : <Typography style={{fontSize: '35px'}}>No conversation selected</Typography>}\n\t\t\t\t</div>\n\n\t\t\t\t<div className={classes.right}>\n\t\t\t\t\tOnline Friends\n\t\t\t\t\t<div className={classes.search}>\n\t\t\t\t\t\t<Search style={{marginRight: '4px'}}/>\n\t\t\t\t\t\t<InputBase\n\t\t\t                placeholder=\"Search... \"\n\t\t\t                fullWidth\n\t\t\t                style={{color: '#848484', fontSize: '16px' }}\n\t\t\t            />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={classes.list}>\n\t\t\t\t\t\t<div className={classes.item}>\n\t\t\t\t\t\t\t<Badge overlap=\"circular\" badgeContent=\"\" variant=\"dot\" classes={{ badge: classes.badge }} anchorOrigin={{ vertical: 'bottom', horizontal: 'right' }}>\n                <Avatar />\n              </Badge>\n\t\t\t\t\t\t\t<div className={classes.name}>\n\t\t\t\t\t\t\t\t<Typography>Manohisoa</Typography>\n\t\t\t\t\t\t\t\t<Typography style={{fontSize: '10px'}}>Online</Typography>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default withRouter(withStyles(useStyles)(Messenger))"]},"metadata":{},"sourceType":"module"}