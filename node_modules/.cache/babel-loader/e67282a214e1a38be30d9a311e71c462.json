{"ast":null,"code":"var _jsxFileName = \"/home/erwan/Documents/Frontend/reactjs/src/components/Post.js\";\nimport React, { Fragment } from 'react';\nimport { Card, CardHeader, CardActionArea, CardMedia, CardContent, Typography, CardActions, withStyles, Avatar, IconButton, Collapse, Button, InputAdornment, FormControl, Input, List, ListItem, ListItemText, ListItemAvatar, CircularProgress } from '@material-ui/core';\nimport { MoreVert, FavoriteBorder, Share, Telegram, PermMedia, Room, EmojiEmotions } from '@material-ui/icons';\nimport { format } from 'timeago.js';\nimport { Link } from 'react-router-dom';\nimport NumericLabel from 'react-pretty-numbers';\nimport axios from 'axios';\nimport { AuthContext } from \"../context/AuthContext\";\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport _ from 'lodash';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst useStyles = theme => ({\n  media: {\n    height: 250,\n    [theme.breakpoints.down(\"sm\")]: {\n      height: 150\n    }\n  },\n  card: {\n    marginBottom: theme.spacing(1),\n    border: '1px solid #ece7e7',\n    boxShadow: 'none'\n  },\n  tile: {\n    height: theme.spacing(40),\n    display: \"flex\",\n    flexDirection: \"column\",\n    margin: 5\n  },\n  name: {\n    fontSize: 16,\n    fontWeight: 500,\n    color: \"#555\"\n  },\n  card_action: {\n    display: \"flex\",\n    justifyContent: \"space-between\"\n  },\n  card_header: {\n    background: \"#f5f5f5\"\n  },\n  item: {\n    display: \"flex\",\n    alignItems: \"center\",\n    spacing: theme.spacing(2),\n    color: \"#555\"\n  },\n  link: {\n    display: \"flex\",\n    textDecoration: \"none\",\n    color: \"#555\",\n    textTransform: 'capitalize'\n  },\n  share: {\n    border: '1px solid #ece7e7',\n    marginBottom: theme.spacing(1),\n    padding: theme.spacing(2),\n    borderRadius: theme.spacing(1) //boxShadow: '0px 1px 7px 0px rgba(0,0,0,0.37)',\n\n  },\n  share_top: {\n    display: 'flex',\n    alignItems: 'center'\n  },\n  shareBottom: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingTop: '10px'\n  },\n  options: {\n    display: 'flex',\n    marginLeft: theme.spacing(6.2)\n  },\n  option: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(1),\n    cursor: 'pointer',\n    \"&:hover\": {\n      background: '#ece7e7',\n      borderRadius: theme.spacing(1)\n    },\n    [theme.breakpoints.down(\"xs\")]: {\n      marginRight: '2px'\n    }\n  },\n  shareIcon: {\n    fontSize: '18px',\n    marginRight: '3px'\n  },\n  shareOptionText: {\n    fontSize: '12px',\n    fontWeight: '500',\n    color: \"#555\",\n    [theme.breakpoints.down(\"sm\")]: {\n      display: 'none'\n    }\n  },\n  shareButton: {\n    textTransform: 'none',\n    background: 'green',\n    color: 'white',\n    fontWeight: '500',\n    \"&:hover\": {\n      background: 'green',\n      fontWeight: 'bold'\n    },\n    [theme.breakpoints.down(\"xs\")]: {\n      width: '45px',\n      height: '30px',\n      fontSize: '13px',\n      padding: '3px'\n    }\n  },\n  loading: {\n    width: '100%',\n    justifyContent: 'center'\n  }\n});\n\nexport class Post extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleExpandClick = id => {\n      this.setState({\n        [`expanded_${id}`]: _.isUndefined(this.state[`expanded_${id}`]) ? true : !this.state[`expanded_${id}`]\n      });\n    };\n\n    this.handleProfileMenuOpenP = event => {\n      this.setState({\n        anchorElP: event.currentTarget\n      });\n    };\n\n    this.handleMenuCloseP = () => {\n      this.setState({\n        anchorElP: null\n      });\n    };\n\n    this.getPub = async () => {\n      await axios({\n        method: 'get',\n        url: this.state.next_url,\n        headers: {\n          Authorization: `Token ${this.context.user.token}`\n        }\n      }).then(res => {\n        var has_more = false;\n\n        if (res.data.next) {\n          has_more = true;\n        }\n\n        this.setState({\n          next_url: res.data.next,\n          count: res.data.count,\n          publication: this.state.publication.concat(res.data.results),\n          more_exist: has_more\n        });\n        console.log(res.data.results);\n      });\n    };\n\n    this.getCom = async () => {\n      let data = await axios({\n        method: 'get',\n        url: 'http://127.0.0.1:8000/userapp/comment/'\n      }).then(({\n        data\n      }) => data);\n      this.setState({\n        comments: data\n      });\n    };\n\n    this.getUser = async () => {\n      let data = await axios({\n        method: 'get',\n        url: 'http://127.0.0.1:8000/userapp/users/'\n      }).then(({\n        data\n      }) => data);\n      this.setState({\n        users: data\n      });\n    };\n\n    this.getCurrentUser = async () => {\n      let data = await axios({\n        method: 'get',\n        url: `http://127.0.0.1:8000/userapp/users/${this.context.user.id}/`\n      }).then(({\n        data\n      }) => data);\n      this.setState({\n        current: data\n      });\n    };\n\n    this.btnComment = async (content, id_post) => {\n      let author = parseInt(this.context.user.id, 10);\n      let post_connected = parseInt(id_post, 10);\n      const contents = {\n        content: content,\n        author: author,\n        post_connected: post_connected\n      };\n      await axios.post('http://127.0.0.1:8000/userapp/comment/', contents);\n      this.getCom();\n      this.setState({\n        comment: ''\n      });\n    };\n\n    this.btnShare = async () => {\n      let author = parseInt(this.context.user.id, 10);\n      const contents = {\n        user: author,\n        message: this.state.share,\n        image: this.state.image\n      };\n      await axios.post('http://127.0.0.1:8000/userapp/publication/', contents, {\n        headers: {\n          Authorization: `Token ${this.context.user.token}`\n        }\n      }).then(res => {\n        console.log(res);\n      });\n      this.setState({\n        share: '',\n        image: ''\n      });\n    };\n\n    this.fetchData = async () => {\n      await axios({\n        method: 'get',\n        url: this.state.next_url,\n        headers: {\n          Authorization: `Token ${this.context.user.token}`\n        }\n      }).then(res => {\n        var has_more = false;\n\n        if (res.data.next) {\n          has_more = true;\n        }\n\n        this.setState({\n          next_url: res.data.next,\n          count: res.data.count,\n          publication: this.state.publication.concat(res.data.results),\n          more_exist: has_more\n        });\n      });\n    };\n\n    this.imageHandler = async e => {\n      const reader = new FileReader();\n\n      reader.onload = () => {\n        if (reader.readyState === 2) {\n          this.setState({\n            image: reader.result\n          });\n        }\n      };\n\n      reader.readAsDataURL(e.target.files[0]);\n      const file = e.target.files[0];\n      const base64 = await this.convertBase64(file);\n      this.setState({\n        image: base64\n      });\n    };\n\n    this.convertBase64 = file => {\n      return new Promise((resolve, reject) => {\n        const fileReader = new FileReader();\n        fileReader.readAsDataURL(file);\n\n        fileReader.onload = () => {\n          resolve(fileReader.result);\n        };\n\n        fileReader.onerror = error => {\n          reject(error);\n        };\n      });\n    };\n\n    this.refImg = /*#__PURE__*/React.createRef();\n    this.state = {\n      expanded: false,\n      anchorElP: '',\n      comment: '',\n      share: '',\n      comments: [],\n      publication: [],\n      users: [],\n      current: [],\n      next_url: 'http://127.0.0.1:8000/userapp/publication/',\n      count: null,\n      more_exist: true,\n      image: ''\n    };\n  }\n\n  componentDidMount() {\n    this.getUser();\n    this.getPub();\n    this.getCom();\n    this.getCurrentUser();\n  }\n\n  render() {\n    const {\n      classes\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(InfiniteScroll, {\n      dataLength: this.state.more_exist //This is important field to render the next data\n      ,\n      next: this.fetchData,\n      hasMore: !isLoading,\n      loader: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 17\n      }, this),\n      endMessage: /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          textAlign: 'center'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Yay! You have seen it all\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 11\n      }, this) // below props only if you need pull down functionality\n      ,\n      pullDownToRefreshContent: /*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          textAlign: 'center'\n        },\n        children: \"\\u2193 Pull down to refresh\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 11\n      }, this),\n      releaseToRefreshContent: /*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          textAlign: 'center'\n        },\n        children: \"\\u2191 Release to refresh\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 11\n      }, this),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.share,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.share_top,\n          children: [/*#__PURE__*/_jsxDEV(Avatar, {\n            src: this.state.current.avatar,\n            style: {\n              marginRight: 10\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"Share your advice ... \",\n            multiline: true,\n            fullWidth: true,\n            value: this.state.share,\n            onChange: e => this.setState({\n              share: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.shareBottom,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.options,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: classes.option,\n              onClick: event => {\n                event.preventDefault();\n                this.refImg.current.click();\n              },\n              children: [/*#__PURE__*/_jsxDEV(PermMedia, {\n                htmlColor: \"tomato\",\n                className: classes.shareIcon\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: classes.shareOptionText,\n                children: \"Photo / video\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 331,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              id: \"file-img\",\n              onChange: e => {\n                this.imageHandler(e);\n              },\n              ref: this.refImg,\n              style: {\n                display: 'none'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: classes.option,\n              children: [/*#__PURE__*/_jsxDEV(Room, {\n                htmlColor: \"green\",\n                className: classes.shareIcon\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 338,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: classes.shareOptionText,\n                children: \"Location\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: classes.option,\n              children: [/*#__PURE__*/_jsxDEV(EmojiEmotions, {\n                htmlColor: \"goldenrod\",\n                className: classes.shareIcon\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 343,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: classes.shareOptionText,\n                children: \"Feellings\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 344,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            className: classes.shareButton,\n            onClick: this.btnShare,\n            children: \"Share\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 9\n      }, this), this.state.publication && this.state.publication.map(pub => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: this.state.users && this.state.users.map(profile => {\n            if (pub.user === profile.id) {\n              //const id_pub = pub.user\n              //const id_aut = this.state.current.id\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(Card, {\n                  className: classes.card,\n                  children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n                    className: classes.card_header,\n                    avatar: /*#__PURE__*/_jsxDEV(Avatar, {\n                      src: profile.avatar\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 363,\n                      columnNumber: 27\n                    }, this),\n                    action: /*#__PURE__*/_jsxDEV(IconButton, {\n                      children: /*#__PURE__*/_jsxDEV(MoreVert, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 367,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 366,\n                      columnNumber: 27\n                    }, this),\n                    title: /*#__PURE__*/_jsxDEV(Link, {\n                      exact: true,\n                      to: \"#\",\n                      className: classes.link,\n                      children: /*#__PURE__*/_jsxDEV(Typography, {\n                        className: classes.name,\n                        children: [\" \", profile.username]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 372,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 371,\n                      columnNumber: 27\n                    }, this),\n                    subheader: format(pub.date)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 360,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(CardActionArea, {\n                    children: [/*#__PURE__*/_jsxDEV(CardMedia, {\n                      className: classes.media,\n                      image: pub.image\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 378,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n                      children: /*#__PURE__*/_jsxDEV(Typography, {\n                        variant: \"h6\",\n                        children: pub.message\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 380,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 379,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 377,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(CardActions, {\n                    className: classes.card_action,\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: classes.item,\n                      children: [\".\", /*#__PURE__*/_jsxDEV(IconButton, {\n                        size: \"small\",\n                        children: /*#__PURE__*/_jsxDEV(FavoriteBorder, {\n                          htmlColor: \"pink\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 386,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 385,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(Button, {\n                        className: classes.link,\n                        size: \"small\",\n                        variant: \"text\",\n                        disabled: true,\n                        children: [/*#__PURE__*/_jsxDEV(NumericLabel, {\n                          params: {\n                            shortFormat: true\n                          },\n                          children: pub.like_nbr\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 388,\n                          columnNumber: 97\n                        }, this), \"\\xA0 Like\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 388,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 384,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: classes.item,\n                      children: [/*#__PURE__*/_jsxDEV(Button, {\n                        className: classes.link,\n                        size: \"small\",\n                        onClick: () => this.handleExpandClick(pub.id),\n                        \"aria-expanded\": this.state[`expanded_${pub.id}`] || false,\n                        children: [/*#__PURE__*/_jsxDEV(NumericLabel, {\n                          params: {\n                            shortFormat: true\n                          },\n                          children: pub.comments_nbr\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 393,\n                          columnNumber: 28\n                        }, this), \"\\xA0 Comment\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 391,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                        size: \"small\",\n                        className: classes.right,\n                        children: /*#__PURE__*/_jsxDEV(Share, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 396,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 395,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 390,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 383,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n                    in: this.state[`expanded_${pub.id}`] || false,\n                    timeout: \"auto\",\n                    unmountOnExit: true,\n                    children: /*#__PURE__*/_jsxDEV(CardContent, {\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: classes.item,\n                        children: [/*#__PURE__*/_jsxDEV(Avatar, {\n                          src: this.state.current.avatar\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 403,\n                          columnNumber: 29\n                        }, this), \"\\u2003\", /*#__PURE__*/_jsxDEV(FormControl, {\n                          fullWidth: true,\n                          children: /*#__PURE__*/_jsxDEV(Input, {\n                            placeholder: \"Your comments \",\n                            multiline: true,\n                            value: this.state.comment,\n                            onChange: e => this.setState({\n                              comment: e.target.value\n                            }),\n                            endAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                              position: \"end\",\n                              children: /*#__PURE__*/_jsxDEV(IconButton, {\n                                \"aria-label\": \"toggle password visibility\",\n                                edge: \"end\",\n                                onClick: () => this.btnComment(this.state.comment, pub.id),\n                                children: /*#__PURE__*/_jsxDEV(Telegram, {}, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 417,\n                                  columnNumber: 41\n                                }, this)\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 412,\n                                columnNumber: 39\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 411,\n                              columnNumber: 37\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 405,\n                            columnNumber: 35\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 404,\n                          columnNumber: 29\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 402,\n                        columnNumber: 28\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        style: {\n                          maxHeight: 150,\n                          overflowY: \"scroll\"\n                        },\n                        children: this.state.users && this.state.users.map(author => {\n                          return /*#__PURE__*/_jsxDEV(\"div\", {\n                            children: this.state.comments && this.state.comments.map(post_com => {\n                              if (author.id === post_com.author && post_com.post_connected === pub.id) {\n                                return /*#__PURE__*/_jsxDEV(\"div\", {\n                                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                                    className: classes.item,\n                                    children: /*#__PURE__*/_jsxDEV(List, {\n                                      sx: {\n                                        width: '100%',\n                                        bgcolor: 'background.paper',\n                                        overflow: 'auto'\n                                      },\n                                      children: /*#__PURE__*/_jsxDEV(ListItem, {\n                                        alignItems: \"flex-start\",\n                                        children: [/*#__PURE__*/_jsxDEV(ListItemAvatar, {\n                                          children: /*#__PURE__*/_jsxDEV(Avatar, {\n                                            src: author.avatar\n                                          }, void 0, false, {\n                                            fileName: _jsxFileName,\n                                            lineNumber: 436,\n                                            columnNumber: 53\n                                          }, this)\n                                        }, void 0, false, {\n                                          fileName: _jsxFileName,\n                                          lineNumber: 435,\n                                          columnNumber: 51\n                                        }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                                          primary: /*#__PURE__*/_jsxDEV(Link, {\n                                            className: classes.link,\n                                            children: author.username\n                                          }, void 0, false, {\n                                            fileName: _jsxFileName,\n                                            lineNumber: 439,\n                                            columnNumber: 61\n                                          }, this),\n                                          secondary: /*#__PURE__*/_jsxDEV(Fragment, {\n                                            children: [/*#__PURE__*/_jsxDEV(Typography, {\n                                              sx: {\n                                                display: 'inline'\n                                              },\n                                              component: \"span\",\n                                              variant: \"body2\",\n                                              color: \"text.primary\",\n                                              children: post_com.content\n                                            }, void 0, false, {\n                                              fileName: _jsxFileName,\n                                              lineNumber: 442,\n                                              columnNumber: 55\n                                            }, this), \" — (\" + format(post_com.date_posted) + \")\"]\n                                          }, void 0, true, {\n                                            fileName: _jsxFileName,\n                                            lineNumber: 441,\n                                            columnNumber: 55\n                                          }, this)\n                                        }, void 0, false, {\n                                          fileName: _jsxFileName,\n                                          lineNumber: 438,\n                                          columnNumber: 51\n                                        }, this)]\n                                      }, void 0, true, {\n                                        fileName: _jsxFileName,\n                                        lineNumber: 434,\n                                        columnNumber: 49\n                                      }, this)\n                                    }, void 0, false, {\n                                      fileName: _jsxFileName,\n                                      lineNumber: 433,\n                                      columnNumber: 47\n                                    }, this)\n                                  }, void 0, false, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 432,\n                                    columnNumber: 45\n                                  }, this)\n                                }, post_com.id, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 431,\n                                  columnNumber: 43\n                                }, this);\n                              } else return null;\n                            })\n                          }, author.id, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 427,\n                            columnNumber: 35\n                          }, this);\n                        })\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 424,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 401,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 400,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 359,\n                  columnNumber: 21\n                }, this)\n              }, profile.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 358,\n                columnNumber: 19\n              }, this);\n            } else return null;\n          })\n        }, pub.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 11\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 7\n    }, this);\n  }\n\n}\nPost.contextType = AuthContext;\nexport default withStyles(useStyles)(Post);","map":{"version":3,"sources":["/home/erwan/Documents/Frontend/reactjs/src/components/Post.js"],"names":["React","Fragment","Card","CardHeader","CardActionArea","CardMedia","CardContent","Typography","CardActions","withStyles","Avatar","IconButton","Collapse","Button","InputAdornment","FormControl","Input","List","ListItem","ListItemText","ListItemAvatar","CircularProgress","MoreVert","FavoriteBorder","Share","Telegram","PermMedia","Room","EmojiEmotions","format","Link","NumericLabel","axios","AuthContext","InfiniteScroll","_","useStyles","theme","media","height","breakpoints","down","card","marginBottom","spacing","border","boxShadow","tile","display","flexDirection","margin","name","fontSize","fontWeight","color","card_action","justifyContent","card_header","background","item","alignItems","link","textDecoration","textTransform","share","padding","borderRadius","share_top","shareBottom","paddingTop","options","marginLeft","option","cursor","marginRight","shareIcon","shareOptionText","shareButton","width","loading","Post","Component","constructor","props","handleExpandClick","id","setState","isUndefined","state","handleProfileMenuOpenP","event","anchorElP","currentTarget","handleMenuCloseP","getPub","method","url","next_url","headers","Authorization","context","user","token","then","res","has_more","data","next","count","publication","concat","results","more_exist","console","log","getCom","comments","getUser","users","getCurrentUser","current","btnComment","content","id_post","author","parseInt","post_connected","contents","post","comment","btnShare","message","image","fetchData","imageHandler","e","reader","FileReader","onload","readyState","result","readAsDataURL","target","files","file","base64","convertBase64","Promise","resolve","reject","fileReader","onerror","error","refImg","createRef","expanded","componentDidMount","render","classes","isLoading","textAlign","avatar","value","preventDefault","click","map","pub","profile","username","date","shortFormat","like_nbr","comments_nbr","right","maxHeight","overflowY","post_com","bgcolor","overflow","date_posted","contextType"],"mappings":"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","sourcesContent":["import React, {Fragment} from 'react'\nimport { Card,CardHeader,CardActionArea,\n        CardMedia,CardContent, Typography,\n        CardActions,withStyles, \n        Avatar,IconButton,Collapse,Button,\n        InputAdornment,FormControl,Input,List,\n        ListItem,ListItemText,ListItemAvatar,\n        CircularProgress } from '@material-ui/core';\nimport { MoreVert,FavoriteBorder,Share,Telegram,PermMedia,Room,EmojiEmotions } from '@material-ui/icons';\nimport {format} from 'timeago.js';\nimport { Link } from 'react-router-dom';\nimport NumericLabel from 'react-pretty-numbers';\nimport axios from 'axios';\nimport { AuthContext } from \"../context/AuthContext\";\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport _ from 'lodash';\n\n\nconst useStyles = theme => ({\n  media:{\n    height: 250,\n    [theme.breakpoints.down(\"sm\")]:{\n      height: 150,\n    },\n  },\n  card:{\n    marginBottom: theme.spacing(1),\n    border: '1px solid #ece7e7',\n    boxShadow: 'none',\n  },\n  tile:{\n    height: theme.spacing(40),\n    display: \"flex\",\n    flexDirection: \"column\",\n    margin: 5,\n\n  },\n  name:{\n    fontSize: 16,\n    fontWeight: 500,\n    color: \"#555\",\n  },\n  card_action:{\n    display: \"flex\",\n    justifyContent: \"space-between\"\n  },\n  card_header:{\n    background: \"#f5f5f5\",\n  },\n  item:{\n    display: \"flex\",\n    alignItems: \"center\",\n    spacing: theme.spacing(2),\n    color: \"#555\",\n  },\n  link:{\n    display: \"flex\",\n    textDecoration: \"none\",\n    color: \"#555\",\n    textTransform: 'capitalize',\n  },\n  share:{\n    border: '1px solid #ece7e7',\n    marginBottom: theme.spacing(1),\n    padding: theme.spacing(2),\n    borderRadius: theme.spacing(1),\n    //boxShadow: '0px 1px 7px 0px rgba(0,0,0,0.37)',\n  },\n  share_top:{\n    display: 'flex',\n    alignItems: 'center',\n  },\n  shareBottom:{\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingTop: '10px'\n  },\n  options:{\n    display: 'flex',\n    marginLeft: theme.spacing(6.2),\n  },\n  option:{\n    display: 'flex',\n    alignItems: 'center',\n    \n    padding: theme.spacing(1),\n    cursor: 'pointer',\n    \"&:hover\": {\n          background: '#ece7e7',\n          borderRadius: theme.spacing(1),\n    },\n    [theme.breakpoints.down(\"xs\")]:{\n      marginRight: '2px',\n    },\n  },\n  shareIcon:{\n    fontSize: '18px',\n    marginRight: '3px',\n  },\n  shareOptionText:{\n    fontSize: '12px',\n    fontWeight: '500',\n    color: \"#555\",\n    [theme.breakpoints.down(\"sm\")]:{\n      display: 'none',\n    },\n  },\n  shareButton:{\n    textTransform: 'none',\n    background: 'green',\n    color: 'white',\n    fontWeight: '500',\n    \"&:hover\": {\n          background: 'green',\n          fontWeight: 'bold',\n    },\n    [theme.breakpoints.down(\"xs\")]:{\n      width: '45px',\n      height: '30px',\n      fontSize: '13px',\n      padding: '3px',\n    },\n  },\n  loading:{\n    width: '100%',\n    justifyContent: 'center',\n  },\n});\n\n\n\nexport class Post extends React.Component {\n  static contextType = AuthContext;\n  constructor(props){\n    super(props);\n    this.refImg = React.createRef();\n    this.state={\n            expanded:false,\n            anchorElP: '',\n            comment: '',\n            share: '',\n            comments: [],\n            publication: [],\n            users: [],\n            current: [],\n            next_url: 'http://127.0.0.1:8000/userapp/publication/',\n            count: null,\n            more_exist: true,\n            image: '',\n        };\n\n  };\n\n  handleExpandClick = (id) => {\n    this.setState({ [`expanded_${id}`]:  _.isUndefined(this.state[`expanded_${id}`])?true:!this.state[`expanded_${id}`] });\n  };\n\n  handleProfileMenuOpenP = (event) => {\n    this.setState({anchorElP:event.currentTarget});\n  };\n\n  handleMenuCloseP = () => {\n    this.setState({anchorElP:null});\n\n  };\n  getPub = async() =>{\n   await axios({\n        method: 'get',\n        url: this.state.next_url,\n        headers:{\n          Authorization: `Token ${this.context.user.token}`,\n        },\n      }).then(res =>{\n        var has_more = false\n        if(res.data.next){\n          has_more = true\n        }\n        this.setState({\n          next_url: res.data.next,\n          count: res.data.count,\n          publication: this.state.publication.concat(res.data.results),\n          more_exist: has_more,\n        })\n        console.log(res.data.results)\n    })\n  };\n  getCom = async() =>{\n      let data = await axios({\n        method: 'get',\n        url: 'http://127.0.0.1:8000/userapp/comment/',\n      }).then(({data}) => data)\n      this.setState({comments: data})\n  };\n  getUser = async() =>{\n    let data = await axios({\n        method: 'get',\n        url: 'http://127.0.0.1:8000/userapp/users/',\n    }).then(({data}) => data)\n    this.setState({users: data})\n  };\n  getCurrentUser = async() =>{\n    let data = await axios({\n      method: 'get',\n      url: `http://127.0.0.1:8000/userapp/users/${this.context.user.id}/`,\n        \n    }).then(({data}) => data)\n    this.setState({current: data})\n  };\n\n  btnComment = async(content,id_post) => {\n    let author = parseInt(this.context.user.id, 10)\n    let post_connected = parseInt(id_post, 10)\n    const contents = {content:content,author:author,post_connected:post_connected}\n    await axios.post('http://127.0.0.1:8000/userapp/comment/',contents)\n    \n    this.getCom()\n    this.setState({comment:''})\n\n    };\n\n  btnShare = async()=>{\n    let author = parseInt(this.context.user.id, 10)\n    const contents = {user:author,message: this.state.share,image:this.state.image}\n    await axios.post('http://127.0.0.1:8000/userapp/publication/',contents,{\n      headers:{\n        Authorization: `Token ${this.context.user.token}`\n      }\n    }).then(res=>{\n      console.log(res)\n    })\n    this.setState({share:'',image:''})\n  };\n\n  fetchData = async() =>{\n    await axios({\n        method: 'get',\n        url: this.state.next_url,\n        headers:{\n          Authorization: `Token ${this.context.user.token}`,\n        },\n      }).then(res =>{\n        var has_more = false\n        if(res.data.next){\n          has_more = true\n        }\n        this.setState({\n          next_url: res.data.next,\n          count: res.data.count,\n          publication: this.state.publication.concat(res.data.results),\n          more_exist: has_more,\n        })\n    })\n  };\n\n  imageHandler = async (e) => {\n\n      const reader = new FileReader();\n      reader.onload = () =>{\n        if(reader.readyState === 2){\n          this.setState({image:reader.result})\n        }\n      }\n      reader.readAsDataURL(e.target.files[0])\n      const file = e.target.files[0];\n      const base64 = await this.convertBase64(file);\n      this.setState({image:base64})\n    };\n\n  convertBase64 = (file) => {\n      return new Promise((resolve, reject) => {\n        const fileReader = new FileReader();\n        fileReader.readAsDataURL(file);\n\n        fileReader.onload = () => {\n          resolve(fileReader.result);\n        };\n\n        fileReader.onerror = (error) => {\n          reject(error);\n        };\n      });\n    };\n\n  componentDidMount(){\n    this.getUser()\n    this.getPub()\n    \n    this.getCom()\n    this.getCurrentUser()\n  };\n  render() {\n    const { classes } = this.props;\n    return (\n      <InfiniteScroll\n        dataLength={this.state.more_exist} //This is important field to render the next data\n        next={this.fetchData}\n        hasMore={!isLoading}\n        loader={<p>Loading...</p>}\n        endMessage={\n          <p style={{ textAlign: 'center' }}>\n            <b>Yay! You have seen it all</b>\n          </p>\n        }\n        // below props only if you need pull down functionality\n        pullDownToRefreshContent={\n          <h3 style={{ textAlign: 'center' }}>&#8595; Pull down to refresh</h3>\n        }\n        releaseToRefreshContent={\n          <h3 style={{ textAlign: 'center' }}>&#8593; Release to refresh</h3>\n        }\n      >\n        <div className={classes.share}>\n          <div className={classes.share_top}>\n            <Avatar src={this.state.current.avatar} style={{marginRight: 10}}/>\n            <Input\n              placeholder=\"Share your advice ... \"\n              multiline\n              fullWidth\n              value = {this.state.share}\n              onChange = {e => this.setState({share:e.target.value})}\n            />\n          </div>\n          <div className={classes.shareBottom}>\n            <div className={classes.options}>\n              <div className={classes.option} onClick={(event) => {\n                event.preventDefault();\n                this.refImg.current.click();\n                }}>\n                <PermMedia htmlColor=\"tomato\" className={classes.shareIcon}/>\n                <span className={classes.shareOptionText}>Photo / video</span>\n              </div>\n              <input type='file' id='file-img' onChange={(e) => {\n                this.imageHandler(e);\n              }} ref={this.refImg} style={{display: 'none'}}/>\n\n              <div className={classes.option}>\n                <Room htmlColor=\"green\" className={classes.shareIcon}/>\n                <span className={classes.shareOptionText}>Location</span>\n              </div>\n\n              <div className={classes.option}>\n                <EmojiEmotions htmlColor=\"goldenrod\" className={classes.shareIcon}/>\n                <span className={classes.shareOptionText}>Feellings</span>\n              </div>\n            </div>\n            <Button className={classes.shareButton} onClick={this.btnShare}>Share</Button>\n          </div>\n        </div>\n        {this.state.publication && this.state.publication.map(pub => {\n          return(\n          <div key = {pub.id}>\n            {this.state.users && this.state.users.map(profile => {\n              if (pub.user === profile.id){\n                //const id_pub = pub.user\n                //const id_aut = this.state.current.id\n                return(\n                  <div key = {profile.id}>\n                    <Card className={classes.card}>\n                      <CardHeader \n                        className={classes.card_header}\n                        avatar={\n                          <Avatar src={profile.avatar}/>\n                        }\n                        action={\n                          <IconButton>\n                            <MoreVert/>\n                          </IconButton>\n                        }\n                        title={\n                          <Link exact to='#' className={classes.link}>\n                            <Typography className={classes.name}> {profile.username}</Typography>\n                          </Link>\n                        }\n                        subheader={format(pub.date)}\n                      />\n                      <CardActionArea>\n                        <CardMedia className={classes.media} image={pub.image} />\n                        <CardContent>\n                          <Typography variant=\"h6\">{pub.message}</Typography>\n                        </CardContent>\n                      </CardActionArea>\n                      <CardActions className={classes.card_action}>\n                        <div className={classes.item}>.\n                          <IconButton size=\"small\" >\n                            <FavoriteBorder htmlColor=\"pink\"/>\n                          </IconButton>\n                          <Button className={classes.link} size=\"small\" variant=\"text\" disabled><NumericLabel params={{shortFormat: true,}}>{pub.like_nbr}</NumericLabel>&nbsp; Like</Button>\n                        </div>\n                        <div className={classes.item}>\n                          <Button className={classes.link} size=\"small\" onClick={() => this.handleExpandClick(pub.id)}\n                          aria-expanded={this.state[`expanded_${pub.id}`] || false}\n                          ><NumericLabel params={{shortFormat: true,}}>{pub.comments_nbr}</NumericLabel>&nbsp; Comment</Button>\n                          \n                          <IconButton size=\"small\" className={classes.right}>\n                            <Share/>\n                          </IconButton>\n                        </div>\n                      </CardActions>\n                      <Collapse in={this.state[`expanded_${pub.id}`] || false} timeout=\"auto\" unmountOnExit>\n                        <CardContent>\n                           <div className={classes.item}>\n                            <Avatar src={this.state.current.avatar}/>&emsp;\n                            <FormControl fullWidth>\n                                  <Input\n                                    placeholder=\"Your comments \"\n                                    multiline\n                                    value = {this.state.comment}\n                                    onChange = {e => this.setState({comment:e.target.value})}\n                                    endAdornment={\n                                    <InputAdornment position=\"end\">\n                                      <IconButton\n                                        aria-label=\"toggle password visibility\"\n                                        edge=\"end\"\n                                        onClick={() => this.btnComment(this.state.comment,pub.id)}\n                                        >\n                                        <Telegram />\n                                      </IconButton>\n                                      </InputAdornment>\n                                    }\n                                  />\n                              </FormControl>\n                            </div>\n                            <div style={{maxHeight: 150,overflowY: \"scroll\",}}>\n                              {this.state.users && this.state.users.map(author => {\n                                return(\n                                  <div key={author.id}>\n                                    {this.state.comments && this.state.comments.map(post_com => {\n                                      if (author.id === post_com.author && post_com.post_connected === pub.id){\n                                        return(\n                                          <div key={post_com.id}>\n                                            <div className={classes.item}>\n                                              <List sx={{ width: '100%', bgcolor: 'background.paper', overflow: 'auto' }}>\n                                                <ListItem alignItems=\"flex-start\">\n                                                  <ListItemAvatar>\n                                                    <Avatar src={author.avatar} />\n                                                  </ListItemAvatar>\n                                                  <ListItemText\n                                                    primary=<Link className={classes.link}>{author.username}</Link>\n                                                    secondary={\n                                                      <Fragment>\n                                                      <Typography\n                                                        sx={{ display: 'inline' }}\n                                                        component=\"span\"\n                                                        variant=\"body2\"\n                                                        color=\"text.primary\"\n                                                      >\n                                                        {post_com.content}\n                                                      </Typography>\n                                                      {\" — (\"+format(post_com.date_posted)+\")\"}\n                                                      </Fragment>\n                                                    }\n                                                    />\n                                                </ListItem>\n                                              </List>\n                                            </div>\n                                          </div>\n                                        )\n                                      }else return null\n                                    })}\n                                  </div>\n                                )\n                              })}\n                            </div>\n                          </CardContent>\n                      </Collapse>\n                    </Card>\n                  </div>\n                )}else return null\n            })}\n            \n          </div>)\n        })}\n      </InfiniteScroll>\n    )\n  }\n}\n\nexport default withStyles(useStyles)(Post);"]},"metadata":{},"sourceType":"module"}