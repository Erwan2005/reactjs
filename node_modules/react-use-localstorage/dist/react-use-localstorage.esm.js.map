{"version":3,"file":"react-use-localstorage.esm.js","sources":["../src/index.ts"],"sourcesContent":["import { Dispatch, useCallback, useEffect, useState } from 'react';\n\nexport default function useLocalStorage(\n  key: string,\n  initialValue: string = ''\n): [string, Dispatch<string>] {\n  const [value, setValue] = useState(\n    () => window.localStorage.getItem(key) || initialValue\n  );\n\n  const setItem = (newValue: string) => {\n    setValue(newValue);\n    window.localStorage.setItem(key, newValue);\n  };\n\n  useEffect(() => {\n    const newValue = window.localStorage.getItem(key);\n    if (value !== newValue) {\n      setValue(newValue || initialValue);\n    }\n  });\n\n  const handleStorage = useCallback(\n    (event: StorageEvent) => {\n      if (event.key === key && event.newValue !== value) {\n        setValue(event.newValue || initialValue);\n      }\n    },\n    [value]\n  );\n\n  useEffect(() => {\n    window.addEventListener('storage', handleStorage);\n    return () => window.removeEventListener('storage', handleStorage);\n  }, [handleStorage]);\n\n  return [value, setItem];\n}\n"],"names":["useLocalStorage","key","initialValue","useState","window","localStorage","getItem","value","setValue","setItem","newValue","useEffect","handleStorage","useCallback","event","addEventListener","removeEventListener"],"mappings":";;SAEwBA,gBACtBC,KACAC;MAAAA;AAAAA,IAAAA,eAAuB;;;kBAEGC,QAAQ,CAChC;AAAA,WAAMC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4BL,GAA5B,KAAoCC,YAA1C;AAAA,GADgC;MAA3BK;MAAOC;;AAId,MAAMC,OAAO,GAAG,SAAVA,OAAU,CAACC,QAAD;AACdF,IAAAA,QAAQ,CAACE,QAAD,CAAR;AACAN,IAAAA,MAAM,CAACC,YAAP,CAAoBI,OAApB,CAA4BR,GAA5B,EAAiCS,QAAjC;AACD,GAHD;;AAKAC,EAAAA,SAAS,CAAC;AACR,QAAMD,QAAQ,GAAGN,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4BL,GAA5B,CAAjB;;AACA,QAAIM,KAAK,KAAKG,QAAd,EAAwB;AACtBF,MAAAA,QAAQ,CAACE,QAAQ,IAAIR,YAAb,CAAR;AACD;AACF,GALQ,CAAT;AAOA,MAAMU,aAAa,GAAGC,WAAW,CAC/B,UAACC,KAAD;AACE,QAAIA,KAAK,CAACb,GAAN,KAAcA,GAAd,IAAqBa,KAAK,CAACJ,QAAN,KAAmBH,KAA5C,EAAmD;AACjDC,MAAAA,QAAQ,CAACM,KAAK,CAACJ,QAAN,IAAkBR,YAAnB,CAAR;AACD;AACF,GAL8B,EAM/B,CAACK,KAAD,CAN+B,CAAjC;AASAI,EAAAA,SAAS,CAAC;AACRP,IAAAA,MAAM,CAACW,gBAAP,CAAwB,SAAxB,EAAmCH,aAAnC;AACA,WAAO;AAAA,aAAMR,MAAM,CAACY,mBAAP,CAA2B,SAA3B,EAAsCJ,aAAtC,CAAN;AAAA,KAAP;AACD,GAHQ,EAGN,CAACA,aAAD,CAHM,CAAT;AAKA,SAAO,CAACL,KAAD,EAAQE,OAAR,CAAP;AACD;;;;"}